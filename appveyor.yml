# Configuration for AppVeyor Continuous Integration Service
#
# Build status: https://ci.appveyor.com/project/ezralanglois/interop
#


configuration:
  - Debug
#  - Release

environment:
  matrix:
    - generator: "Visual Studio 14 2015 Win64"
    - generator: "Visual Studio 14 2015"
#    - generator: "Visual Studio 12 2013 Win64"
#    - generator: "Visual Studio 12 2013"
#    - generator: "MinGW Makefiles"
#      mingw_path: C:\MinGW64\bin

install:
  - cmd: date /T & time /T
  - cmd: set PATH=%PATH%;C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\bin\;
  - cmd: choco install swig --version 3.0.5 -y > NUL
  - ps: "wget http://github.com/nunit/nunitv2/releases/download/2.6.4/NUnit-2.6.4.zip -OutFile ./NUnit-2.6.4.zip"
  - 7z e NUnit-2.6.4.zip -oNUnit-2.6.4

before_build:
  - SET
  - set PATH=%PATH:C:\Program Files (x86)\Git\bin;=%
  - set PATH=%PATH:C:\Program Files\Git\usr\bin;=%
#  - set PATH=C:\MinGW64\bin;%PATH%

build_script:
  - cmake ../ "-G%GENERATOR%" -H. -Bbuild -DCMAKE_BUILD_TYPE="%configuration%" -DNUNIT_ROOT=$PWD/NUnit-2.6.4
  - cmake --build build --config "%configuration%"

test_script:
  - cmake --build build --config "%configuration%" --target check

branches:
  only:
  - master