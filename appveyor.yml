# Configuration for AppVeyor Continuous Integration Service
#
# Build status: https://ci.appveyor.com/project/ezralanglois/interop
#

configuration:
  - Debug
  - Release

environment:
  matrix:
#    - generator: "Visual Studio 14 2015 Win64"
#    - generator: "Visual Studio 14 2015"
#    - generator: "Visual Studio 12 2013 Win64"
#    - generator: "Visual Studio 12 2013"

# Cannot compile GTest with MinGW
    - generator: "MinGW Makefiles"
      mingw_path: C:\MinGW64\bin
#
#
before_build: # move to mingw
  - set PATH=%PATH:C:\Program Files\Git\usr\bin;=%
  - set PATH=%PATH%:%mingw_path%

install:
  - cmd: date /T & time /T
  - cmd: choco install swig --version 3.0.5 -y > NUL

build_script:
  - cmake --version
  - cmake ../ "-G%GENERATOR%" -H. -Bbuild -DCMAKE_BUILD_TYPE="%configuration%"
  - cmake --build build --config "%configuration%"

test_script:
  - cmake --build build --config "%configuration%" --target check

branches:
  only:
  - master